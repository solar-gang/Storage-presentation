<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <!-- iPhone-friendly viewport + safe area -->
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>LOS • Solar + Battery Presentation</title>
  <meta name="description" content="Time-of-Use problem, real SCE bill proof, Tesla VPP value, outage protection, and a 25-year comparison calculator." />

  <style>
    :root{
      --night:#06122a;
      --night2:#040b1c;
      --text: rgba(255,255,255,.94);
      --muted: rgba(255,255,255,.72);
      --muted2: rgba(255,255,255,.56);
      --border: rgba(255,255,255,.14);
      --shadow: 0 18px 70px rgba(0,0,0,.48);

      --sun:#ffb000;
      --sun2:#ff7a00;
      --lime:#8cff3f;
      --cyan:#00c2ff;
      --bolt:#ffe94a;

      --red:#ff3b30;
      --green:#34c759;

      --r:18px;
      --r2:22px;

      --grad: linear-gradient(135deg, var(--sun2), var(--lime), var(--cyan));
    }

    *{box-sizing:border-box}

    html,body{height:100%}
    html{
      scroll-behavior:smooth;
      /* reduces “scroll into view behind header” on iOS */
      scroll-padding-top: 90px;
    }

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 520px at 16% 10%, rgba(255,122,0,.22), transparent 58%),
        radial-gradient(900px 520px at 46% 40%, rgba(140,255,63,.10), transparent 58%),
        radial-gradient(900px 520px at 84% 12%, rgba(0,194,255,.20), transparent 55%),
        radial-gradient(1200px 700px at 55% 95%, rgba(255,233,74,.08), transparent 62%),
        linear-gradient(180deg, var(--night), var(--night2));
    }

    a{color:#cfe8ff;text-decoration:none}
    a:hover{text-decoration:underline}

    /* iOS: prevent tap highlight looking ugly */
    a, button { -webkit-tap-highlight-color: transparent; }

    /* Topbar with safe-area support */
    .topbar{
      position:fixed; inset:0 0 auto 0;
      background:rgba(4,10,22,.62);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border-bottom:1px solid rgba(255,255,255,.14);
      z-index:50;
      padding-top: env(safe-area-inset-top);
    }
    .topbar-inner{
      max-width:1200px;
      margin:0 auto;
      padding:12px 18px;
      padding-left: calc(18px + env(safe-area-inset-left));
      padding-right: calc(18px + env(safe-area-inset-right));
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
    }

    .brand{
      display:flex; align-items:center; gap:12px;
      min-width: 280px;
    }
    .brand img{ height:42px; width:auto; display:block; }
    .brandText{ display:flex; flex-direction:column; line-height:1.15; }
    .brandTitle{ font-weight:950; letter-spacing:-.02em; display:flex; align-items:center; gap:10px; }
    .brandGlow{
      width:10px;height:10px;border-radius:999px;
      background: var(--grad);
      box-shadow: 0 0 0 6px rgba(255,122,0,.10), 0 0 24px rgba(0,194,255,.26);
    }
    .brandSub{ color:var(--muted2); font-size:12.5px; margin-top:2px; }

    .nav{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }

    /* Bigger tap targets for phones */
    .btn{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding:12px 14px;                 /* slightly larger */
      border-radius: 12px;
      font-weight: 900;
      cursor:pointer;
      min-height: 44px;                  /* iOS tap target */
      line-height: 1;
      transition: transform .12s ease, background .12s ease, box-shadow .12s ease;
      touch-action: manipulation;         /* reduce double-tap issues */
    }
    .btn:hover{ background: rgba(255,255,255,.10); transform: translateY(-1px); box-shadow: 0 12px 40px rgba(0,0,0,.25); }
    .btn.primary{
      background: var(--grad);
      border-color: rgba(255,255,255,.18);
      color: #06101e;
      box-shadow: 0 14px 50px rgba(0,194,255,.12), 0 14px 50px rgba(255,122,0,.10);
    }

    .container{
      max-width:1200px;
      margin:0 auto;
      /* account for safe-area bottom too */
      padding: calc(92px + env(safe-area-inset-top)) 18px calc(84px + env(safe-area-inset-bottom));
      padding-left: calc(18px + env(safe-area-inset-left));
      padding-right: calc(18px + env(safe-area-inset-right));
    }

    .hero{
      border:1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border-radius: var(--r2);
      box-shadow: var(--shadow);
      padding:18px;
      display:grid;
      grid-template-columns: 1.25fr .9fr;
      gap:14px;
      overflow:hidden;
      position:relative;
    }
    .hero::before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(700px 300px at 20% 20%, rgba(255,122,0,.14), transparent 60%),
                  radial-gradient(700px 300px at 80% 20%, rgba(0,194,255,.12), transparent 60%),
                  radial-gradient(700px 300px at 55% 90%, rgba(140,255,63,.10), transparent 60%);
      pointer-events:none;
      filter: blur(2px);
    }
    .hero > *{ position:relative; z-index:1; }

    .hero h1{ margin:0; font-size: clamp(22px, 3.2vw, 36px); letter-spacing:-.035em; line-height:1.08; }
    .hero h1 .gradText{ background: var(--grad); -webkit-background-clip:text; background-clip:text; color:transparent; font-weight:1000; }
    .hero p{ margin:10px 0 0; color:var(--muted); line-height:1.45; max-width: 820px; }

    .pills{ margin-top:14px; display:flex; flex-wrap:wrap; gap:10px; }
    .pill{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      padding:8px 10px;
      border-radius: 999px;
      color: var(--muted);
      font-size: 13px;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .pill .dot{ width:8px;height:8px;border-radius:999px;background: var(--grad); box-shadow: 0 0 18px rgba(0,194,255,.22); }
    .heroActions{ margin-top:14px; display:flex; gap:10px; flex-wrap:wrap; }
    .note{ margin-top:14px; color: var(--muted2); font-size: 12.5px; border-left: 3px solid rgba(0,194,255,.55); padding-left:10px; line-height:1.45; }

    .card{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      border-radius: var(--r);
      padding:14px;
      box-shadow: 0 12px 35px rgba(0,0,0,.25);
    }
    .fieldGrid{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; }

    label span{
      display:block;
      color:var(--muted2);
      font-size:11.5px;
      letter-spacing:.06em;
      text-transform:uppercase;
      margin-bottom:6px;
    }

    /* iOS: bigger inputs, better keyboards */
    input{
      width:100%;
      padding:12px 12px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.22);
      color: var(--text);
      font-weight: 900;
      outline:none;
      min-height: 44px;
      font-size: 16px; /* IMPORTANT: prevents iOS zoom on focus */
    }
    input:focus{
      border-color: rgba(0,194,255,.65);
      box-shadow: 0 0 0 6px rgba(0,194,255,.14);
    }

    .section{
      margin-top: 18px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      border-radius: var(--r2);
      box-shadow: var(--shadow);
      overflow:hidden;
      scroll-margin-top: 92px; /* anchor offsets for iOS */
    }
    .sectionHead{
      padding:16px 18px;
      border-bottom:1px solid rgba(255,255,255,.12);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
      display:flex;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      align-items:flex-start;
    }
    .sectionHead h2{ margin:0; font-size:16px; display:flex; align-items:center; gap:10px; }
    .spark{ width:10px;height:10px;border-radius:999px; background: var(--grad); box-shadow: 0 0 22px rgba(255,122,0,.18), 0 0 22px rgba(0,194,255,.16); }
    .sectionHead p{ margin:6px 0 0; color:var(--muted); max-width:840px; font-size:13.5px; line-height:1.35; }
    .sectionBody{ padding:18px; }

    .grid12{ display:grid; grid-template-columns: repeat(12, 1fr); gap:14px; }
    .span5{ grid-column: span 5; }
    .span6{ grid-column: span 6; }
    .span7{ grid-column: span 7; }
    .span12{ grid-column: span 12; }

    .badgeRow{ display:flex; gap:10px; flex-wrap:wrap; }
    .badge{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      border-radius:999px;
      padding:7px 10px;
      font-size: 12.5px;
      color: var(--muted);
      font-weight: 900;
    }
    .badge.problem{ border-color: rgba(255,59,48,.40); background: rgba(255,59,48,.10); }
    .badge.solution{ border-color: rgba(52,199,89,.40); background: rgba(52,199,89,.10); }
    .badge.energy{ border-color: rgba(0,194,255,.35); background: rgba(0,194,255,.10); }

    figure.bill{
      margin:0;
      border:1px solid rgba(255,255,255,.14);
      border-radius: var(--r);
      background: rgba(0,0,0,.20);
      overflow:hidden;
      position:relative;
    }
    figure.bill img{
      width:100%;
      height:auto;
      display:block;
      cursor: zoom-in;
      background:#fff;
      /* iOS: smoother scrolling images */
      -webkit-user-select:none;
      user-select:none;
    }
    .billCaption{
      padding:10px 12px;
      border-top:1px solid rgba(255,255,255,.10);
      color: var(--muted2);
      font-size: 12.5px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .tag{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      color: var(--muted);
      font-weight:900;
      font-size: 12px;
    }
    .tag .mini{ width:8px;height:8px;border-radius:999px;background: var(--grad); }

    .callout{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.20);
      border-radius: var(--r);
      padding:12px;
      line-height:1.4;
    }
    .callout h3{
      margin:0 0 8px;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: .06em;
      color: var(--muted);
    }
    .callout ul{ margin:0; padding-left: 18px; color: rgba(255,255,255,.88); }
    .callout li{ margin:8px 0; }

    .bigMoney{
      font-size: clamp(34px, 5vw, 54px);
      font-weight: 1000;
      letter-spacing:-.03em;
      margin: 6px 0 8px;
      line-height:1.0;
    }
    .bigMoney.red{ color: var(--red); }
    .bigMoney.green{ color: var(--green); }

    .videoWrap{
      border-radius: var(--r);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.35);
      box-shadow: 0 18px 70px rgba(0,0,0,.35);
    }
    video{
      width:100%;
      height:auto;
      display:block;
      background:#000;
    }

    .columns{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    .col{
      border:1px solid rgba(255,255,255,.14);
      border-radius: var(--r);
      background: rgba(255,255,255,.04);
      overflow:hidden;
    }
    .colHead{
      padding:12px;
      border-bottom:1px solid rgba(255,255,255,.10);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      background: rgba(255,255,255,.05);
    }
    .colLabel{ color:var(--muted2); text-transform:uppercase; letter-spacing:.06em; font-size:11px; }
    .colTitle{ font-weight:1000; font-size:18px; letter-spacing:-.02em; margin-top:2px; }
    .chip{
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.18);
      border-radius:999px;
      padding:6px 10px;
      font-size:12px;
      color:var(--muted);
      font-weight:900;
      white-space:nowrap;
    }
    .col.utility .colHead{ background: linear-gradient(180deg, rgba(255,59,48,.20), rgba(255,255,255,.05)); }
    .col.opt1 .colHead{ background: linear-gradient(135deg, rgba(255,122,0,.18), rgba(140,255,63,.10), rgba(0,194,255,.12)); }
    .col.opt2 .colHead{ background: linear-gradient(180deg, rgba(52,199,89,.18), rgba(0,194,255,.10), rgba(255,255,255,.05)); }

    .totals{
      padding:12px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      border-top:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.12);
    }
    .metric{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      border-radius: 12px;
      padding:10px;
    }
    .metric .k{
      color:var(--muted2);
      font-size:11.5px;
      text-transform:uppercase;
      letter-spacing:.06em;
    }
    .metric .v{
      margin-top:6px;
      font-weight:1000;
      font-size:18px;
      letter-spacing:-.02em;
    }

    /* ✅ iPhone-friendly table: horizontal scroll instead of squishing */
    .tableWrap{
      margin-top:12px;
      border:1px solid rgba(255,255,255,.14);
      border-radius: var(--r);
      overflow:auto;                 /* allow scroll */
      -webkit-overflow-scrolling: touch;
      background: rgba(0,0,0,.16);
    }
    table{
      width:100%;
      min-width: 620px;             /* forces swipe on phones */
      border-collapse:collapse;
      font-size:13px;
    }
    thead th{
      text-align:left;
      padding:10px 10px;
      color:var(--muted);
      background: rgba(255,255,255,.06);
      border-bottom:1px solid rgba(255,255,255,.10);
      position:sticky; top:0;
    }
    tbody td{
      padding:9px 10px;
      border-bottom:1px solid rgba(255,255,255,.06);
      color: rgba(255,255,255,.88);
      white-space: nowrap;
    }

    /* Lightbox */
    .lightbox{
      position:fixed; inset:0;
      background: rgba(0,0,0,.80);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 22px;
      padding-top: calc(22px + env(safe-area-inset-top));
      padding-bottom: calc(22px + env(safe-area-inset-bottom));
      z-index:200;
    }
    .lightbox.open{ display:flex; }
    .lightbox-inner{
      max-width:min(1100px, 96vw);
      max-height: 92vh;
      background: rgba(8,12,22,.94);
      border:1px solid rgba(255,255,255,.18);
      border-radius: 16px;
      overflow:hidden;
      box-shadow: 0 30px 120px rgba(0,0,0,.55);
    }
    .lightbox-bar{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-bottom:1px solid rgba(255,255,255,.10);
      color: var(--muted);
      font-weight:900;
      font-size: 13px;
    }
    .lightbox-bar button{
      min-height:44px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color: var(--text);
      border-radius: 12px;
      padding:8px 12px;
      cursor:pointer;
      font-weight:900;
    }
    .lightbox img{ width:100%; height:auto; display:block; background:#fff; }

    @media (max-width: 980px){
      .hero{ grid-template-columns: 1fr; }
      .span5,.span6,.span7,.span12{ grid-column: span 12; }
      .fieldGrid{ grid-template-columns: 1fr; }
      .columns{ grid-template-columns: 1fr; }
    }

    @media print{
      .topbar{ display:none !important; }
      body{ background:#fff; color:#000; }
      .section, .hero, .card, figure.bill, .tableWrap{
        box-shadow:none !important;
        background:#fff !important;
        border-color:#ddd !important;
      }
      a{ color:#000; text-decoration:underline; }
      .btn{ display:none !important; }
      .billCaption{ color:#333 !important; }
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <img src="./assets/los-logo.png" alt="LOS logo">
        <div class="brandText">
          <div class="brandTitle"><span class="brandGlow"></span> Leverage Our Sun</div>
          <div class="brandSub">TOU problem → Solar + Storage solution → 25-year savings</div>
        </div>
      </div>
      <div class="nav">
        <a class="btn" href="#tou">TOU</a>
        <a class="btn" href="#bills">Bills</a>
        <a class="btn" href="#vpp">VPP</a>
        <a class="btn" href="#outage">Outage</a>
        <a class="btn primary" href="#calculator">Calculator</a>
        <button class="btn" id="btnPrint" type="button">Print / Save PDF</button>
      </div>
    </div>
  </div>

  <main class="container">
    <section class="hero">
      <div>
        <h1>Win the day. <span class="gradText">Own the night.</span></h1>
        <p>
          This presentation uses your real SCE bills to explain Time-of-Use pricing and why batteries matter,
          then shows the proof (solar + storage), and finally the 25-year savings comparison.
        </p>

        <div class="pills">
          <div class="pill"><span class="dot"></span><b>Credibility:</b> real bills + official links</div>
          <div class="pill"><span class="dot"></span><b>Clarity:</b> tap-to-zoom images</div>
          <div class="pill"><span class="dot"></span><b>Close:</b> 25-year calculator + savings</div>
        </div>

        <div class="heroActions">
          <a class="btn primary" href="#bills">Start with the bills</a>
          <a class="btn" href="#calculator">Jump to calculator</a>
        </div>

        <div class="note">
          iPhone tip: You can swipe the 25-year table left/right.
        </div>
      </div>

      <div class="card">
        <h3 style="margin:0 0 10px;">Appointment quick notes</h3>
        <div class="fieldGrid">
          <label><span>Homeowner name</span><input id="custName" placeholder="John & Jane"></label>
          <label><span>City</span><input id="custCity" placeholder="Murrieta, CA"></label>
          <label><span>Major loads</span><input id="custLoads" placeholder="EV / pool / A/C"></label>
          <label><span>Goal</span><input id="custGoal" placeholder="Lower bill + backup power"></label>
        </div>
        <div style="margin-top:12px;color:var(--muted2);font-size:12.5px;line-height:1.45;">
          Use Print/PDF to save a clean recap for the homeowner.
        </div>
      </div>
    </section>

    <!-- TOU -->
    <section class="section" id="tou">
      <div class="sectionHead">
        <div>
          <h2><span class="spark"></span> 1) Time-of-Use explained using your Edison bill</h2>
          <p>
            Edison charges different prices depending on time of day. Most families use the most electricity in the evening—when it’s most expensive.
          </p>
        </div>
        <div class="badgeRow">
          <span class="badge problem">Problem: Peak pricing</span>
          <span class="badge energy">TOU Education</span>
        </div>
      </div>

      <div class="sectionBody grid12">
        <div class="span5">
          <div class="callout">
            <h3>What to point out</h3>
            <ul>
              <li><b>Different cost periods</b> (On / Mid / Off / Super Off Peak)</li>
              <li><b>Avg cost per kWh</b> changes by time of day</li>
              <li><b>Total cost</b> rises when usage lands in the expensive window</li>
            </ul>
          </div>

          <div class="callout" style="margin-top:12px;border-color:rgba(0,194,255,.28);background:rgba(0,194,255,.10);">
            <h3>30-second talk track</h3>
            <div style="color:rgba(255,255,255,.88);">
              “This bill shows the same home paying different prices depending on the time of day.
              The expensive window is when most families are home—cooking, laundry, A/C, and EV charging.”
            </div>
          </div>

          <div class="card" style="margin-top:12px;">
            <div style="color:var(--muted2);font-size:11.5px;letter-spacing:.06em;text-transform:uppercase;margin-bottom:10px;">
              Official Edison links (verification)
            </div>
            <div style="display:grid;gap:10px;">
              <a class="btn" style="text-align:left;" target="_blank" rel="noreferrer"
                 href="https://www.sce.com/save-money/rates-financing/residential-rate-plans/time-of-use-plans">
                SCE Residential TOU Plans
              </a>
              <a class="btn" style="text-align:left;" target="_blank" rel="noreferrer"
                 href="https://www.sce.com/save-money/rates-financing/sce-rate-advisory">
                SCE Rates Advisory (Rate changes)
              </a>
            </div>
          </div>
        </div>

        <div class="span7">
          <figure class="bill">
            <img
              src="./assets/sce-bill-tou-clean.png"
              alt="SCE TOU bill"
              data-zoom-title="SCE Time-of-Use Bill (Tap to zoom)"
            />
            <div class="billCaption">
              <span class="tag"><span class="mini"></span> Tap to zoom</span>
              <span class="tag"><span class="mini"></span> “Problem” proof</span>
            </div>
          </figure>
        </div>
      </div>
    </section>

    <!-- Bills -->
    <section class="section" id="bills">
      <div class="sectionHead">
        <div>
          <h2><span class="spark"></span> 2) Problem vs Solution using real SCE bills</h2>
          <p>
            Same utility. Same TOU rules. Different outcome—solar produces in the day and batteries cover the expensive hours.
          </p>
        </div>
        <div class="badgeRow">
          <span class="badge problem">Utility only</span>
          <span class="badge solution">Solar + Storage</span>
        </div>
      </div>

      <div class="sectionBody grid12">
        <div class="card span6" style="border-color:rgba(255,59,48,.28);">
          <div style="color:var(--muted2);font-size:11.5px;letter-spacing:.06em;text-transform:uppercase;">Utility only (example)</div>
          <div class="bigMoney red">$722</div>
          <div style="color:var(--muted);line-height:1.4;">
            When the biggest usage happens during the expensive window, the bill climbs fast.
          </div>
        </div>

        <div class="card span6" style="border-color:rgba(52,199,89,.28);">
          <div style="color:var(--muted2);font-size:11.5px;letter-spacing:.06em;text-transform:uppercase;">Solar + Storage bill</div>
          <div class="bigMoney green">$28</div>
          <div style="color:var(--muted);line-height:1.4;">
            Solar makes power in the day, and the battery runs the home during peak hours—so you buy less when it costs the most.
          </div>
        </div>

        <div class="span12">
          <figure class="bill">
            <img
              src="./assets/sce-bill-solar28.png"
              alt="SCE solar + storage bill $28"
              data-zoom-title="SCE Solar + Storage Bill (Tap to zoom)"
            />
            <div class="billCaption">
              <span class="tag"><span class="mini"></span> Tap to zoom</span>
              <span class="tag"><span class="mini"></span> “Solution” proof</span>
            </div>
          </figure>
        </div>
      </div>
    </section>

    <!-- VPP -->
    <section class="section" id="vpp">
      <div class="sectionHead">
        <div>
          <h2><span class="spark"></span> 3) Tesla Virtual Power Plant (VPP)</h2>
          <p>
            Battery owners may be eligible for incentives for supporting the grid during events (program rules vary). Use official Tesla sources.
          </p>
        </div>
        <div class="badgeRow">
          <span class="badge energy">Tesla</span>
          <span class="badge solution">Extra value</span>
        </div>
      </div>

      <div class="sectionBody grid12">
        <div class="card span6">
          <div style="color:var(--muted2);font-size:11.5px;letter-spacing:.06em;text-transform:uppercase;margin-bottom:10px;">
            Official links
          </div>
          <div style="display:grid;gap:10px;">
            <a class="btn" style="text-align:left;" target="_blank" rel="noreferrer"
               href="https://www.tesla.com/support/energy/virtual-power-plant/sce">
              Tesla VPP with SCE (official)
            </a>
            <a class="btn" style="text-align:left;" target="_blank" rel="noreferrer"
               href="https://www.tesla.com/support/energy/powerwall/learn/incentives">
              Tesla incentives overview (official)
            </a>
          </div>
          <div style="margin-top:12px;color:var(--muted2);font-size:12.5px;line-height:1.45;">
            Note: incentives depend on program terms and eligibility.
          </div>
        </div>

        <div class="card span6">
          <div style="color:var(--muted2);font-size:11.5px;letter-spacing:.06em;text-transform:uppercase;margin-bottom:10px;">
            Tesla check images (optional)
          </div>

          <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;">
            <figure class="bill" style="border-radius:14px;">
              <img src="./assets/tesla-check1.jpg" alt="Tesla check sample 1"
                   data-zoom-title="Tesla check sample 1"
                   onerror="this.style.display='none'; this.parentElement.querySelector('.billCaption').style.display='block';">
              <div class="billCaption" style="display:none;">Upload <b>tesla-check1.jpg</b> to <code>/assets</code></div>
            </figure>
            <figure class="bill" style="border-radius:14px;">
              <img src="./assets/tesla-check2.jpg" alt="Tesla check sample 2"
                   data-zoom-title="Tesla check sample 2"
                   onerror="this.style.display='none'; this.parentElement.querySelector('.billCaption').style.display='block';">
              <div class="billCaption" style="display:none;">Upload <b>tesla-check2.jpg</b> to <code>/assets</code></div>
            </figure>
            <figure class="bill" style="border-radius:14px;">
              <img src="./assets/tesla-check3.jpg" alt="Tesla check sample 3"
                   data-zoom-title="Tesla check sample 3"
                   onerror="this.style.display='none'; this.parentElement.querySelector('.billCaption').style.display='block';">
              <div class="billCaption" style="display:none;">Upload <b>tesla-check3.jpg</b> to <code>/assets</code></div>
            </figure>
          </div>
        </div>
      </div>
    </section>

    <!-- Outage -->
    <section class="section" id="outage">
      <div class="sectionHead">
        <div>
          <h2><span class="spark"></span> 4) Outage protection demo video</h2>
          <p>Your “wow moment”: the home stays powered during a blackout because the battery takes over instantly.</p>
        </div>
        <div class="badgeRow">
          <span class="badge energy">Backup</span>
          <span class="badge solution">Confidence</span>
        </div>
      </div>

      <div class="sectionBody">
        <div class="videoWrap">
          <video controls playsinline preload="metadata">
            <source src="./assets/outage-demo.mp4" type="video/mp4">
            Upload <code>outage-demo.mp4</code> to <code>/assets</code>.
          </video>
        </div>
      </div>
    </section>

    <!-- Calculator -->
    <section class="section" id="calculator">
      <div class="sectionHead">
        <div>
          <h2><span class="spark"></span> 5) 25-Year comparison calculator</h2>
          <p>Edit monthly payment + escalator. Total 25-year cost and savings vs utility are calculated live.</p>
        </div>
        <div class="badgeRow">
          <span class="badge problem">Utility (red)</span>
          <span class="badge energy">Option 1</span>
          <span class="badge solution">Option 2</span>
        </div>
      </div>

      <div class="sectionBody">
        <div style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:center;margin-bottom:12px;">
          <div style="color:var(--muted);font-size:13px;">Live updates as you type.</div>
          <button class="btn" id="btnReset" type="button">Reset example</button>
        </div>

        <div class="columns">
          <div class="col utility">
            <div class="colHead">
              <div><div class="colLabel">Current Utility</div><div class="colTitle">Edison</div></div>
              <div class="chip">Baseline</div>
            </div>
            <div style="padding:12px;display:grid;gap:10px;">
              <label><span>Avg monthly bill ($)</span><input id="uPay" value="458" inputmode="decimal" step="1"></label>
              <label><span>Annual increase (%)</span><input id="uEsc" value="9" inputmode="decimal" step="0.1"></label>
            </div>
            <div class="totals">
              <div class="metric"><div class="k">25-Year total</div><div class="v" style="color:var(--red)" id="uTotal">$0</div></div>
              <div class="metric"><div class="k">Year 25 monthly</div><div class="v" id="uY25">$0</div></div>
            </div>
          </div>

          <div class="col opt1">
            <div class="colHead">
              <div><div class="colLabel">Option 1</div><div class="colTitle">Solar + Battery</div></div>
              <div class="chip">Proposal A</div>
            </div>
            <div style="padding:12px;display:grid;gap:10px;">
              <label><span>Avg monthly payment ($)</span><input id="o1Pay" value="295" inputmode="decimal" step="1"></label>
              <label><span>Annual escalator (%)</span><input id="o1Esc" value="3.5" inputmode="decimal" step="0.1"></label>
            </div>
            <div class="totals">
              <div class="metric"><div class="k">25-Year total</div><div class="v" id="o1Total">$0</div></div>
              <div class="metric"><div class="k">Savings vs utility</div><div class="v" style="color:var(--green)" id="o1Save">$0</div></div>
            </div>
          </div>

          <div class="col opt2">
            <div class="colHead">
              <div><div class="colLabel">Option 2</div><div class="colTitle">Solar + Battery</div></div>
              <div class="chip">Proposal B</div>
            </div>
            <div style="padding:12px;display:grid;gap:10px;">
              <label><span>Avg monthly payment ($)</span><input id="o2Pay" value="310" inputmode="decimal" step="1"></label>
              <label><span>Annual escalator (%)</span><input id="o2Esc" value="0" inputmode="decimal" step="0.1"></label>
            </div>
            <div class="totals">
              <div class="metric"><div class="k">25-Year total</div><div class="v" id="o2Total">$0</div></div>
              <div class="metric"><div class="k">Savings vs utility</div><div class="v" style="color:var(--green)" id="o2Save">$0</div></div>
            </div>
          </div>
        </div>

        <div class="tableWrap" aria-label="25-year table (swipe left/right on phones)">
          <table>
            <thead>
              <tr>
                <th style="width:70px">Year</th>
                <th>Utility Monthly</th>
                <th>Option 1 Monthly</th>
                <th>Option 2 Monthly</th>
              </tr>
            </thead>
            <tbody id="rows"></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="Image viewer">
    <div class="lightbox-inner">
      <div class="lightbox-bar">
        <div id="lightboxTitle">Preview</div>
        <button id="lightboxClose" type="button">Close</button>
      </div>
      <img id="lightboxImg" alt="Zoomed image"/>
    </div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);

    function toNumber(val){
      const n = parseFloat(String(val).replace(/[^0-9.\-]/g,''));
      return Number.isFinite(n) ? n : 0;
    }
    function money0(n){
      const x = Number.isFinite(n) ? n : 0;
      return x.toLocaleString(undefined, { style:'currency', currency:'USD', maximumFractionDigits: 0 });
    }
    function money2(n){
      const x = Number.isFinite(n) ? n : 0;
      return x.toLocaleString(undefined, { style:'currency', currency:'USD', maximumFractionDigits: 2 });
    }

    function monthlyByYear(baseMonthly, annualEscPct, years=25){
      const esc = annualEscPct / 100;
      const arr = [];
      for(let y=1; y<=years; y++){
        arr.push(baseMonthly * Math.pow(1+esc, y-1));
      }
      return arr;
    }
    function total25yr(baseMonthly, annualEscPct){
      const series = monthlyByYear(baseMonthly, annualEscPct, 25);
      return series.reduce((sum, m) => sum + (m*12), 0);
    }

    function render(){
      const uPay = toNumber($('uPay').value);
      const uEsc = toNumber($('uEsc').value);

      const o1Pay = toNumber($('o1Pay').value);
      const o1Esc = toNumber($('o1Esc').value);

      const o2Pay = toNumber($('o2Pay').value);
      const o2Esc = toNumber($('o2Esc').value);

      const uSeries = monthlyByYear(uPay, uEsc, 25);
      const o1Series = monthlyByYear(o1Pay, o1Esc, 25);
      const o2Series = monthlyByYear(o2Pay, o2Esc, 25);

      const uTotal = total25yr(uPay, uEsc);
      const o1Total = total25yr(o1Pay, o1Esc);
      const o2Total = total25yr(o2Pay, o2Esc);

      $('uTotal').textContent = money0(uTotal);
      $('o1Total').textContent = money0(o1Total);
      $('o2Total').textContent = money0(o2Total);

      const s1 = uTotal - o1Total;
      const s2 = uTotal - o2Total;

      $('o1Save').textContent = money0(s1);
      $('o2Save').textContent = money0(s2);

      $('o1Save').style.color = s1 >= 0 ? 'var(--green)' : 'var(--red)';
      $('o2Save').style.color = s2 >= 0 ? 'var(--green)' : 'var(--red)';

      $('uY25').textContent = money2(uSeries[24]);

      const tbody = $('rows');
      tbody.innerHTML = '';
      for(let y=1; y<=25; y++){
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${y}</td>
          <td>${money2(uSeries[y-1])}</td>
          <td>${money2(o1Series[y-1])}</td>
          <td>${money2(o2Series[y-1])}</td>
        `;
        tbody.appendChild(tr);
      }
    }

    document.querySelectorAll('input').forEach(i => i.addEventListener('input', render));
    render();

    $('btnPrint').addEventListener('click', () => window.print());

    $('btnReset').addEventListener('click', () => {
      $('uPay').value = '458';
      $('uEsc').value = '9';
      $('o1Pay').value = '295';
      $('o1Esc').value = '3.5';
      $('o2Pay').value = '310';
      $('o2Esc').value = '0';
      render();
    });

    // Lightbox zoom
    const lb = $('lightbox');
    const lbImg = $('lightboxImg');
    const lbTitle = $('lightboxTitle');

    function openLightbox(src, title){
      lbImg.src = src;
      lbTitle.textContent = title || 'Preview';
      lb.classList.add('open');
    }
    function closeLightbox(){
      lb.classList.remove('open');
      lbImg.src = '';
    }

    document.querySelectorAll('img[data-zoom-title]').forEach(img => {
      img.addEventListener('click', () => openLightbox(img.src, img.dataset.zoomTitle));
    });
    $('lightboxClose').addEventListener('click', closeLightbox);
    lb.addEventListener('click', (e) => { if(e.target === lb) closeLightbox(); });
    document.addEventListener('keydown', (e) => { if(e.key === 'Escape') closeLightbox(); });

    // iOS: ensure anchors land correctly (extra nudge)
    window.addEventListener('hashchange', () => {
      setTimeout(() => window.scrollBy(0, -6), 0);
    });
  </script>
</body>
</html>
